name: App register CI/CD Workflow
on:
  push:
    branches:
      - master
  workflow_dispatch:
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: checkout
              uses: actions/checkout@v2
            - name: set up java
              uses: actions/setup-java@v2
              with:
                distribution: 'temurin'
                java-version: '17'
            # - name: change directory
            #   run: cd app-register
            - name: code coverage
              uses: codecov/codecov-action@v2
              with:
                files: 'target/site/jacoco/jacoco.xml'
                flags: unittests
                name: codecov-umbrella
            - name: build with maven
              run: mvn clean package -DskipTests  
            - name: maven test
              run: mvn test